# MEMORIES.md - 開発進捗と記憶

このファイルは、セッションを跨いで開発の文脈を保持するための記録です。

---

## 最終更新日

2026-01-24（セッション終了）

---

## 完了した機能

### グループ招待・参加機能（PR #3 マージ済み）

- 招待リンクの生成と共有
- リンク経由でのグループ参加
- 招待トークンの有効期限管理

### DBスキーマ整合性の修正（fix/phase1-schema-consistency）

- カラム名の統一（`created_by` → `owner_id`、`paid_by` → `payer_id`）
- TypeScript型定義とDBスキーマの整合性確保
- デモ機能のDB整合性修正

### UI改善

- フォーム入力文字の視認性改善（コミット 30ba71c）
- スマホでの文字色問題 → **解決済み**

### 環境構築

- `docs/MEMORIES.md` による記憶保持機能を導入
- `CLAUDE.md` に運用ルール追加（記憶の保持、セキュリティポリシー、/done コマンド）

---

## テスト状況

- **108件のテストがパス**
- 1件の失敗（schema-consistency.test.ts: マイグレーションファイル内のポリシー名検証）

---

## 現在の課題

### 1. schema-consistency.test.ts の失敗

- マイグレーションファイル内のRLSポリシー名が期待値と異なる
- `payments_update_payer`, `payments_delete_payer` の検証が失敗

### 2. 理想を言語化することの難しさ

- ユーザー体験の「あるべき姿」を具体的な仕様に落とし込むプロセスが課題
- 段階的な改善とフィードバックループが重要

---

## 次のタスク候補

- [ ] schema-consistency.test.ts の失敗を解消
- [ ] 清算機能の実装検討
- [ ] デモデータ自動削除機能（24時間後）

---

## セッション引き継ぎメモ

*次回セッション開始時に参照すべき事項*

- 現在のブランチ: `fix/phase1-schema-consistency`
- **未プッシュのコミット1件あり**: `936221b chore: setup AI development workflow (CLAUDE.md, MEMORIES.md, docs)`
- main ブランチへのPR作成を検討中
- CLAUDE.md の運用ルール（TDD, 承認フロー, 記憶の保持）を厳守すること

### 今セッションの作業内容

1. **AI開発ワークフローの整備**
   - CLAUDE.md に記憶保持ルール、セキュリティポリシー、`/done` コマンドを追加
   - docs/MEMORIES.md を新規作成し、進捗管理の仕組みを導入

2. **Git状態**
   - ローカルに未プッシュのコミットが1件存在
   - `git push` でリモートに反映可能
